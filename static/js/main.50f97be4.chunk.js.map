{"version":3,"sources":["data/random.csv","data/nature.csv","data/objects.csv","getData.js","app.jsx","index.js"],"names":["isNumber","val","String","Number","async","getData","meta","dataObj","dataCombined","fetch","dataRandom","then","response","text","dataRaw","push","trim","split","splice","dataNature","dataObjects","fetchMultiple","reduce","acc","row","emoji","source","label","src","console","warn","key","includes","replace","terms","map","deepValue","Object","entries","sort","a","b","filter","WIDTH","parseSize","size","Math","round","App","data","dataSet","useState","scroll","scrollSet","compoundDistance","window","innerWidth","useEffect","res","document","body","style","height","length","innerHeight","requestAnimationFrame","loop","newScroll","pageYOffset","className","width","relativeDistance","emojisToScale","floor","ceil","idx","floorCeilProgress","floatScale","calculatedScale","min","opacity","diff","max","transform","marginTop","maxWidth","dangerouslySetInnerHTML","__html","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.50f97be4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/random.833014d3.csv\";","export default __webpack_public_path__ + \"static/media/nature.b53118cb.csv\";","export default __webpack_public_path__ + \"static/media/objects.48965679.csv\";","import dataRandom from './data/random.csv';\n// import dataTravel from './data/travel.csv';\nimport dataNature from './data/nature.csv';\nimport dataObjects from './data/objects.csv';\n\nfunction isNumber(val) {\n  return String(Number(val)) === val;\n}\n\nasync function fetchMultiple() {\n  let dataCombined = [];\n\n  await fetch(dataRandom)\n    .then((response) => response.text())\n    .then((dataRaw) => {\n      dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n    });\n\n  // await fetch(dataTravel)\n  //   .then((response) => response.text())\n  //   .then((dataRaw) => {\n  //     dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n  //   });\n\n  await fetch(dataNature)\n    .then((response) => response.text())\n    .then((dataRaw) => {\n      dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n    });\n\n  await fetch(dataObjects)\n    .then((response) => response.text())\n    .then((dataRaw) => {\n      dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n    });\n\n  return dataCombined;\n}\n\nexport async function getData() {\n  let meta = {};\n\n  const dataCombined = await fetchMultiple();\n\n  let dataObj = dataCombined.reduce((acc, row) => {\n    const [emoji, source, label, src] = row.split(`,`);\n    if (source === '?') {\n      return acc;\n    }\n\n    if (meta[emoji]) {\n      console.warn('REPEATED', emoji);\n    }\n\n    acc[emoji] = source;\n    meta[emoji] = { source, label, src };\n    return acc;\n  }, {});\n\n  for (const key in dataObj) {\n    const val = dataObj[key];\n    if (dataObj[key].includes('km')) {\n      dataObj[key] = Number(val.replace('km', '')) * 100 * 1000;\n    } else if (dataObj[key].includes('m')) {\n      dataObj[key] = Number(val.replace('m', '')) * 100;\n    } else if (isNumber(dataObj[key])) {\n      dataObj[key] = Number(val);\n    } else if (dataObj[val]) {\n      dataObj[key] = dataObj[val];\n    } else if (val.includes(`*`)) {\n      const terms = val.split(`*`).map((deepValue) => {\n        if (isNumber(deepValue)) {\n          return Number(deepValue);\n        } else if (dataObj[deepValue]) {\n          return dataObj[deepValue];\n        }\n        return deepValue;\n      });\n      dataObj[key] = terms[0] * terms[1];\n    }\n  }\n\n  return Object.entries(dataObj)\n    .sort((a, b) => {\n      return a[1] - b[1];\n    })\n    .map((emoji) => {\n      return [emoji[0], emoji[1], meta[emoji[0]].label];\n    })\n    .filter((emoji) => {\n      return emoji[1] !== '?';\n    });\n}\n","import { useEffect, useState } from 'react';\nimport { getData } from './getData.js';\n\nconst WIDTH = 300;\n\nfunction parseSize(size) {\n  if (size < 2) {\n    return `miltre li ${size * 10}<br/> (${size * 10} mm)`;\n  }\n  if (size < 100) {\n    return `centre li ${size}<br/> (${size}cm)`;\n  }\n  if (size < 100 * 1000) {\n    return `mitre li ${Math.round(size * 100) / 100 / 100}<br/> (${\n      Math.round(size * 100) / 100 / 100\n    }m)`;\n  }\n  return `ki'otre li ${Math.round(size / 100 / 10) / 100}<br/> (${\n    Math.round(size / 100 / 10) / 100\n  }km)`;\n}\n\nfunction App() {\n  const [data, dataSet] = useState([]);\n  const [scroll, scrollSet] = useState(0);\n\n  let compoundDistance = window.innerWidth / 2;\n\n  useEffect(() => {\n    getData().then((res) => {\n      dataSet(res);\n      document.body.style.height = `${WIDTH * res.length + window.innerHeight}px`;\n    });\n\n    function loop() {\n      const newScroll = window.pageYOffset;\n      scrollSet(newScroll);\n      window.requestAnimationFrame(loop);\n    }\n    window.requestAnimationFrame(loop);\n  }, []);\n\n  return (\n    <div className=\"emoji-display\">\n      {data.map(([emoji, size, label]) => {\n        const width = window.innerWidth;\n        let relativeDistance = compoundDistance - scroll;\n\n        if (relativeDistance < width / 2) {\n          relativeDistance =\n            relativeDistance * 0.25 + (0.75 * (relativeDistance + width * 0.5)) / 2;\n        }\n\n        compoundDistance += WIDTH;\n\n        if (relativeDistance < -WIDTH / 2 || relativeDistance > width - WIDTH / 2) {\n          return null;\n        }\n\n        let emojisToScale = [Math.floor(scroll / WIDTH), Math.ceil(scroll / WIDTH)];\n\n        emojisToScale = emojisToScale\n          .map((idx) => {\n            if (idx < 0) return 0;\n            if (idx > data.length - 1) return data.length - 1;\n            return idx;\n          })\n          .map((idx) => data[idx]);\n\n        const floorCeilProgress = (scroll / WIDTH) % 1;\n        const floatScale =\n          floorCeilProgress * emojisToScale[1][1] + (1 - floorCeilProgress) * emojisToScale[0][1];\n\n        const calculatedScale = Math.min(size / floatScale, 64);\n\n        let opacity = 1;\n        if (calculatedScale > 3) {\n          const diff = (calculatedScale - 3) / 8;\n          opacity = Math.max(1 - diff, 0);\n        }\n\n        return (\n          <div\n            className=\"emoji-container\"\n            style={{\n              transform: `translatex(${relativeDistance}px)`\n              // left: `${relativeDistance}px`\n            }}\n            key={emoji}\n          >\n            <div\n              className=\"emoji\"\n              style={{\n                opacity,\n                transform: `scale(${calculatedScale}) translateY(10%)`\n              }}\n            >\n              {emoji}\n            </div>\n            <div style={{ marginTop: '2rem', maxWidth: '15rem' }}>\n              <b>{label}</b>\n              <div\n                dangerouslySetInnerHTML={{ __html: parseSize(size) }}\n                style={{ marginTop: '.5rem' }}\n              ></div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default App;\n","import \"./style.css\";\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app.jsx';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}