{"version":3,"sources":["data/random.csv","data/nature.csv","data/objects.csv","getData.js","app.jsx","index.js"],"names":["isNumber","val","String","Number","async","getData","meta","dataObj","dataCombined","fetch","dataRandom","then","response","text","dataRaw","push","trim","split","splice","dataNature","dataObjects","fetchMultiple","reduce","acc","row","emoji","source","label","src","console","warn","key","includes","replace","terms","map","deepValue","Object","entries","sort","a","b","filter","WIDTH","lojbanLength","number","toString","parseSize","size","Math","round","App","data","dataSet","useState","scroll","scrollSet","compoundDistance","window","innerWidth","emojiUnicode","comp","length","charCodeAt","useEffect","res","document","body","style","height","innerHeight","requestAnimationFrame","loop","newScroll","pageYOffset","className","width","relativeDistance","emojisToScale","floor","ceil","idx","floorCeilProgress","floatScale","calculatedScale","min","opacity","diff","max","transform","marginTop","maxWidth","dangerouslySetInnerHTML","__html","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1b4ae40f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/random.833014d3.csv\";","export default __webpack_public_path__ + \"static/media/nature.b53118cb.csv\";","export default __webpack_public_path__ + \"static/media/objects.48965679.csv\";","import dataRandom from './data/random.csv';\n// import dataTravel from './data/travel.csv';\nimport dataNature from './data/nature.csv';\nimport dataObjects from './data/objects.csv';\n\nfunction isNumber(val) {\n  return String(Number(val)) === val;\n}\n\nasync function fetchMultiple() {\n  let dataCombined = [];\n\n  await fetch(dataRandom)\n    .then((response) => response.text())\n    .then((dataRaw) => {\n      dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n    });\n\n  // await fetch(dataTravel)\n  //   .then((response) => response.text())\n  //   .then((dataRaw) => {\n  //     dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n  //   });\n\n  await fetch(dataNature)\n    .then((response) => response.text())\n    .then((dataRaw) => {\n      dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n    });\n\n  await fetch(dataObjects)\n    .then((response) => response.text())\n    .then((dataRaw) => {\n      dataCombined.push(...dataRaw.trim().split(`\\n`).splice(1));\n    });\n\n  return dataCombined;\n}\n\nexport async function getData() {\n  let meta = {};\n\n  const dataCombined = await fetchMultiple();\n\n  let dataObj = dataCombined.reduce((acc, row) => {\n    const [emoji, source, label, src] = row.split(`,`);\n    if (source === '?') {\n      return acc;\n    }\n\n    if (meta[emoji]) {\n      console.warn('REPEATED', emoji);\n    }\n\n    acc[emoji] = source;\n    meta[emoji] = { source, label, src };\n    return acc;\n  }, {});\n\n  for (const key in dataObj) {\n    const val = dataObj[key];\n    if (dataObj[key].includes('km')) {\n      dataObj[key] = Number(val.replace('km', '')) * 100 * 1000;\n    } else if (dataObj[key].includes('m')) {\n      dataObj[key] = Number(val.replace('m', '')) * 100;\n    } else if (isNumber(dataObj[key])) {\n      dataObj[key] = Number(val);\n    } else if (dataObj[val]) {\n      dataObj[key] = dataObj[val];\n    } else if (val.includes(`*`)) {\n      const terms = val.split(`*`).map((deepValue) => {\n        if (isNumber(deepValue)) {\n          return Number(deepValue);\n        } else if (dataObj[deepValue]) {\n          return dataObj[deepValue];\n        }\n        return deepValue;\n      });\n      dataObj[key] = terms[0] * terms[1];\n    }\n  }\n\n  return Object.entries(dataObj)\n    .sort((a, b) => {\n      return a[1] - b[1];\n    })\n    .map((emoji) => {\n      return [emoji[0], emoji[1], meta[emoji[0]].label];\n    })\n    .filter((emoji) => {\n      return emoji[1] !== '?';\n    });\n}\n","import { useEffect, useState } from 'react';\nimport { getData } from './getData.js';\n\nconst WIDTH = 300;\n\nfunction lojbanLength(number) {\n  return number.toString().replace(/\\./g, ' pi ');\n}\n\nfunction parseSize(size) {\n  if (size < 2) {\n    return `miltre li ${lojbanLength(size * 10)}<br/> (${size * 10} mm)`;\n  }\n  if (size < 100) {\n    return `centre li ${lojbanLength(size)}<br/> (${size}cm)`;\n  }\n  if (size < 100 * 1000) {\n    return `mitre li ${lojbanLength(Math.round(size * 100) / 100 / 100)}<br/> (${\n      Math.round(size * 100) / 100 / 100\n    }m)`;\n  }\n  return `ki'otre li ${lojbanLength(Math.round(size / 100 / 10) / 100)}<br/> (${\n    Math.round(size / 100 / 10) / 100\n  }km)`;\n}\n\nfunction App() {\n  const [data, dataSet] = useState([]);\n  const [scroll, scrollSet] = useState(0);\n\n  let compoundDistance = window.innerWidth / 2;\n\n  useEffect(() => {\n    getData().then((res) => {\n      dataSet(res);\n      document.body.style.height = `${WIDTH * res.length + window.innerHeight}px`;\n    });\n\n    function loop() {\n      const newScroll = window.pageYOffset;\n      scrollSet(newScroll);\n      window.requestAnimationFrame(loop);\n    }\n    window.requestAnimationFrame(loop);\n  }, []);\n\n  function emojiUnicode(emoji) {\n    var comp;\n    if (emoji.length === 1) {\n      comp = emoji.charCodeAt(0);\n    }\n    comp = (emoji.charCodeAt(0) - 0xd800) * 0x400 + (emoji.charCodeAt(1) - 0xdc00) + 0x10000;\n    if (comp < 0) {\n      comp = emoji.charCodeAt(0);\n    }\n    return comp.toString('16');\n  }\n\n  return (\n    <div className=\"emoji-display\">\n      {data.map(([emoji, size, label]) => {\n        const width = window.innerWidth;\n        let relativeDistance = compoundDistance - scroll;\n\n        if (relativeDistance < width / 2) {\n          relativeDistance =\n            relativeDistance * 0.25 + (0.75 * (relativeDistance + width * 0.5)) / 2;\n        }\n\n        compoundDistance += WIDTH;\n\n        if (relativeDistance < -WIDTH / 2 || relativeDistance > width - WIDTH / 2) {\n          return null;\n        }\n\n        let emojisToScale = [Math.floor(scroll / WIDTH), Math.ceil(scroll / WIDTH)];\n\n        emojisToScale = emojisToScale\n          .map((idx) => {\n            if (idx < 0) return 0;\n            if (idx > data.length - 1) return data.length - 1;\n            return idx;\n          })\n          .map((idx) => data[idx]);\n\n        const floorCeilProgress = (scroll / WIDTH) % 1;\n        const floatScale =\n          floorCeilProgress * emojisToScale[1][1] + (1 - floorCeilProgress) * emojisToScale[0][1];\n\n        const calculatedScale = Math.min(size / floatScale, 64);\n\n        let opacity = 1;\n        if (calculatedScale > 3) {\n          const diff = (calculatedScale - 3) / 8;\n          opacity = Math.max(1 - diff, 0);\n        }\n\n        return (\n          <div\n            className=\"emoji-container\"\n            style={{\n              transform: `translatex(${relativeDistance}px)`\n              // left: `${relativeDistance}px`\n            }}\n            key={emoji}\n          >\n            <div\n              className=\"emoji\"\n              style={{\n                opacity,\n                transform: `scale(${calculatedScale}) translateY(10%)`\n              }}\n            >\n              <img\n                src={`https://raw.githubusercontent.com/googlefonts/noto-emoji/main/svg/emoji_u${emojiUnicode(\n                  emoji\n                )}.svg`}\n              />\n            </div>\n            <div style={{ marginTop: '2rem', maxWidth: '15rem' }}>\n              <b>{label}</b>\n              <div\n                dangerouslySetInnerHTML={{ __html: parseSize(size) }}\n                style={{ marginTop: '.5rem' }}\n              ></div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default App;\n","import \"./style.css\";\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app.jsx';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}